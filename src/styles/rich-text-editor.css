/* Rich Text Editor Custom Styles */

/* Editor wrapper - flexible height */
.rich-text-editor-wrapper {
  display: block;
  position: relative;
  height: auto;
}

/* Override library's forced height constraints */
.rich-text-editor-wrapper ._wrap_5y04w_1 {
  height: auto !important;
  overflow: visible !important;
  min-height: unset !important;
}

.rich-text-editor-wrapper ._innerWrap_5y04w_15 {
  height: auto !important;
  overflow: visible !important;
  min-height: unset !important;
}

/* Override the library to work with flexible height */
.rich-text-editor-wrapper > div:first-child {
  height: auto !important;
  min-height: unset !important;
  display: block;
  overflow: visible !important;
}

/* Editor toolbar */
.rich-text-editor-wrapper .editor-toolbar,
.rich-text-editor-wrapper > div > div:first-child {
  flex-shrink: 0;
  z-index: 10;
}

/* Editor content wrapper - natural height */
.rich-text-editor-wrapper .editor-content-wrapper,
.rich-text-editor-wrapper > div > div:last-child {
  display: block;
  overflow: visible !important;
  min-height: unset !important;
  height: auto !important;
}

/* Editor content area - no scroll */
.rich-text-editor-wrapper .ProseMirror {
  display: block;
  overflow: visible !important;
  padding: 1rem;
  min-height: 150px; /* Reasonable minimum for desktop */
  height: auto !important;
  /* Remove any background that might show lines */
  background: transparent !important;
  background-image: none !important;
  /* Remove any repeating patterns */
  background-repeat: no-repeat !important;
}

/* Ensure no horizontal lines or patterns */
.rich-text-editor-wrapper .ProseMirror:before,
.rich-text-editor-wrapper .ProseMirror:after {
  display: none !important;
}

/* Remove any ruled lines background */
.rich-text-editor-wrapper,
.rich-text-editor-wrapper * {
  background-image: none !important;
}

/* Toolbar responsive styles */
@media (max-width: 768px) {
  /* Make toolbar more compact and single row */
  .rich-text-editor-wrapper > div > div:first-child {
    padding: 0.25rem !important;
    gap: 0.125rem !important;
    flex-wrap: nowrap !important; /* Force single row */
    overflow-x: auto !important; /* Allow horizontal scroll */
    overflow-y: hidden !important;
    max-height: none !important; /* Remove height restriction */
    -webkit-overflow-scrolling: touch;
  }
  
  /* Reduce ALL button sizes on mobile */
  .rich-text-editor-wrapper button {
    padding: 0.25rem !important;
    min-width: 28px !important;
    width: 28px !important;
    height: 28px !important;
    font-size: 0.75rem !important;
  }
  
  .rich-text-editor-wrapper button svg {
    width: 14px !important;
    height: 14px !important;
  }
  
  /* Hide complex toolbar groups by index (more reliable) */
  /* Keep only essential tools: Bold, Italic, Lists, Link, Image */
  .rich-text-editor-wrapper > div > div:first-child > div:nth-child(n+7) {
    display: none !important;
  }
  
  /* Also hide specific button groups we can identify */
  .rich-text-editor-wrapper button[aria-label*="Font"],
  .rich-text-editor-wrapper button[aria-label*="Size"],
  .rich-text-editor-wrapper button[aria-label*="Color"],
  .rich-text-editor-wrapper button[aria-label*="Highlight"],
  .rich-text-editor-wrapper button[aria-label*="Align"],
  .rich-text-editor-wrapper button[aria-label*="Indent"],
  .rich-text-editor-wrapper button[aria-label*="Import"],
  .rich-text-editor-wrapper button[aria-label*="Export"],
  .rich-text-editor-wrapper button[aria-label*="Table"],
  .rich-text-editor-wrapper button[aria-label*="Subscript"],
  .rich-text-editor-wrapper button[aria-label*="Superscript"] {
    display: none !important;
  }
  
  /* Hide dividers on mobile to save space */
  .rich-text-editor-wrapper hr,
  .rich-text-editor-wrapper [role="separator"] {
    display: none !important;
  }
  
  /* Compact toolbar groups */
  .rich-text-editor-wrapper > div > div:first-child > div {
    gap: 0.125rem !important;
    padding: 0 !important;
    margin: 0 !important;
  }
}

/* Compact toolbar for small screens */
@media (max-width: 640px) {
  /* Further hide items on very small screens */
  .rich-text-editor-wrapper .toolbar-group-subandsuperscript,
  .rich-text-editor-wrapper .toolbar-group-tasklist,
  .rich-text-editor-wrapper .toolbar-group-blockquote {
    display: none !important;  
  }
  
  /* Make toolbar scrollable horizontally if needed */
  .rich-text-editor-wrapper .editor-toolbar {
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
    scrollbar-width: thin;
  }
}

/* Editor content mobile optimizations */
@media (max-width: 768px) {
  /* Mobile specific adjustments */
  .rich-text-editor-wrapper .ProseMirror {
    min-height: 100px; /* Much smaller minimum for mobile */
    padding: 0.75rem;
    font-size: 16px !important; /* Prevent zoom on iOS */
    -webkit-tap-highlight-color: transparent;
    -webkit-touch-callout: text;
    -webkit-user-select: text;
    user-select: text;
    touch-action: manipulation;
  }
  
  /* Ensure touch targets are large enough */
  .rich-text-editor-wrapper .ProseMirror p,
  .rich-text-editor-wrapper .ProseMirror li,
  .rich-text-editor-wrapper .ProseMirror h1,
  .rich-text-editor-wrapper .ProseMirror h2,
  .rich-text-editor-wrapper .ProseMirror h3 {
    min-height: 28px;
    line-height: 1.6;
  }
  
  /* Better focus handling on mobile */
  .rich-text-editor-wrapper .ProseMirror:focus {
    outline: none;
    box-shadow: none;
  }
  
  /* Fix for mobile input issues */
  .rich-text-editor-wrapper input,
  .rich-text-editor-wrapper textarea {
    font-size: 16px !important;
  }
}

/* Fix for horizontal lines appearance */
.rich-text-editor-wrapper .ProseMirror p.is-empty::before {
  color: #aaa;
  content: attr(data-placeholder);
  float: left;
  height: 0;
  pointer-events: none;
}

/* Ensure proper content wrapping */
.rich-text-editor-wrapper .ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
}

/* Remove any background lines or borders that might appear as divisions */
.rich-text-editor-wrapper .ProseMirror > * {
  margin-bottom: 0.5rem;
}

.rich-text-editor-wrapper .ProseMirror p {
  margin: 0 0 0.5rem 0;
}

/* Ensure the editor grows smoothly */
.rich-text-editor-wrapper {
  transition: height 0.2s ease;
}

/* Remove all min-height constraints from library */
.rich-text-editor-wrapper,
.rich-text-editor-wrapper * {
  min-height: unset !important;
  max-height: unset !important;
}

/* Only apply min-height to the actual content area */
.rich-text-editor-wrapper .ProseMirror {
  min-height: 150px !important; /* Override the unset above */
}

@media (max-width: 768px) {
  .rich-text-editor-wrapper .ProseMirror {
    min-height: 100px !important; /* Override for mobile */
  }
}

/* Additional overrides for any overflow settings */
.rich-text-editor-wrapper * {
  overflow-y: visible !important;
}

/* Specific override for richtext classes */
.richtext-overflow-hidden {
  overflow: visible !important;
}

.richtext-overflow-y-auto {
  overflow-y: visible !important;
}

.richtext-h-full {
  height: auto !important;
}