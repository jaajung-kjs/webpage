/* Mobile-friendly touch targets and improvements */

/* Ensure all interactive elements have minimum touch target size */
.touch-manipulation {
  touch-action: manipulation;
  -webkit-tap-highlight-color: transparent;
  -webkit-touch-callout: none;
  -webkit-user-select: none;
  user-select: none;
}

/* Allow text selection */
.touch-manipulation.selectable,
.touch-manipulation p,
.touch-manipulation span,
.touch-manipulation div[contenteditable] {
  -webkit-user-select: text;
  user-select: text;
  -webkit-touch-callout: default;
}

/* Safe area support for notch devices */
.h-safe {
  height: env(safe-area-inset-bottom);
}

.pb-safe {
  padding-bottom: env(safe-area-inset-bottom);
}

/* Improve button touch targets on mobile */
@media (max-width: 640px) {
  /* Minimum 44x44px touch targets as per Apple HIG */
  button, 
  [role="button"],
  a,
  [role="link"] {
    min-height: 44px;
    min-width: 44px;
  }
  
  /* Ensure icon buttons maintain consistent size */
  button[data-slot="button"][class*="h-8"],
  button[data-slot="button"][class*="h-9"] {
    min-height: 44px;
    min-width: 44px;
  }

  /* Better spacing for mobile forms */
  input,
  textarea,
  select {
    min-height: 48px;
    font-size: 16px; /* Prevents zoom on iOS */
  }

  /* Improve dropdown touch targets */
  [role="menuitem"] {
    min-height: 44px;
    padding: 12px 16px;
  }

  /* Better card spacing on mobile */
  .card {
    margin-bottom: 1rem;
  }

  /* Improve tab touch targets */
  [role="tab"] {
    min-height: 44px;
    padding: 12px 16px;
  }

  /* Better spacing for list items */
  .list-item {
    padding: 16px;
    margin-bottom: 8px;
  }

  /* Improve dialog/modal spacing */
  [role="dialog"] {
    /* Remove margin as it conflicts with fixed positioning */
    max-height: calc(100vh - 32px);
  }
  
  /* Full screen modals on mobile */
  .dialog-content[data-state="open"] {
    animation: none;
  }
  
  /* Better sheet animation performance */
  [data-radix-collection-item] {
    will-change: transform;
  }
  
  /* Dialog mobile optimization */
  [data-slot="dialog-content"] {
    /* Remove margin and width overrides that conflict with transform centering */
    /* The base component already handles width and centering properly */
  }
  
  /* Dialog close button mobile fix */
  [data-slot="dialog-close"] {
    position: fixed !important;
    z-index: 100 !important;
  }
  
  /* Dialog header mobile spacing */
  [data-slot="dialog-header"] {
    padding-right: 2rem;
  }
  
  /* Select dropdown mobile optimization */
  [data-radix-popper-content-wrapper] {
    max-width: calc(100vw - 2rem) !important;
    margin: 0 1rem !important;
  }

  /* Better scroll performance */
  .overflow-x-auto {
    -webkit-overflow-scrolling: touch;
    scroll-snap-type: x mandatory;
  }

  .overflow-x-auto > * {
    scroll-snap-align: start;
  }

  /* Improve readability on mobile */
  .prose {
    font-size: 16px;
    line-height: 1.75;
  }

  /* Better spacing for stats cards */
  .stats-grid {
    gap: 12px;
  }

  /* Improve navigation drawer */
  .sheet-content {
    width: 85vw;
    max-width: 320px;
  }

  /* Better spacing for action buttons */
  .action-buttons {
    gap: 8px;
  }

  /* Improve table scrolling */
  .table-container {
    -webkit-overflow-scrolling: touch;
    overflow-x: auto;
  }

  /* Better avatar sizes on mobile */
  .avatar-mobile {
    width: 40px;
    height: 40px;
  }

  /* Improve card click areas */
  .card-clickable {
    position: relative;
  }

  .card-clickable::before {
    content: '';
    position: absolute;
    top: -8px;
    right: -8px;
    bottom: -8px;
    left: -8px;
  }

  /* Better focus states for mobile */
  :focus-visible {
    outline: 3px solid var(--primary);
    outline-offset: 2px;
  }

  /* Disable hover effects on touch devices */
  @media (hover: none) {
    .hover\:underline:hover {
      text-decoration: none;
    }
    
    .hover\:bg-accent:hover {
      background-color: transparent;
    }
  }

  /* Improve swipe gestures */
  .swipeable {
    touch-action: pan-y;
  }

  /* Better loading states */
  .skeleton {
    animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
  }

  /* Improve bottom navigation spacing */
  .bottom-safe-area {
    padding-bottom: env(safe-area-inset-bottom, 16px);
  }
}

/* Landscape mobile improvements */
@media (max-width: 768px) and (orientation: landscape) {
  /* Reduce vertical spacing in landscape */
  .header {
    padding: 8px 16px;
  }

  /* Smaller modals in landscape */
  [role="dialog"] {
    max-height: 90vh;
  }

  /* Adjust grid layouts for landscape */
  .grid-cols-2 {
    grid-template-columns: repeat(3, minmax(0, 1fr));
  }
}

/* Dark mode adjustments for mobile */
@media (max-width: 640px) and (prefers-color-scheme: dark) {
  /* Better contrast for dark mode on mobile */
  .card {
    border-color: hsl(var(--border) / 0.5);
  }

  /* Improve readability in dark mode */
  .text-muted-foreground {
    opacity: 0.8;
  }
}

/* Accessibility improvements */
@media (prefers-reduced-motion: reduce) {
  * {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}